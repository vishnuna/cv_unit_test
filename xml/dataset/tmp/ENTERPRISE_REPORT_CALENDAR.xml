<data_set_category name="ENTERPRISE_REPORT_CALENDAR"
                   description="Enterprise Report Calendar"
                   windowTitle="Enterprise Report Calendar Setup"
                   entityName="EnterpriseReportCalendar"
                   screenWidth="800"
                   screenHeight="500"
                   objectType="EnterpriseReportCalendar"
                   singleDataSet="EnterpriseReportCalendar"
                   extends="COMMON_UTILS, SUBMISSION_UTILS">
    <parameters>
        <parameter name="loading" type="boolean" hidden="true" defaultValue="false"/>

        <parameter name="movingNodes" type="table" hidden="true">
            <parameter name="movingNodeID" type="string" hidden="true" defaultValue=""/>
            <parameter name="movingNodeName" type="string" hidden="true" defaultValue=""/>
            <parameter name="movingNodeParentID" type="string" hidden="true" defaultValue=""/>
        </parameter>

        <parameter name="updateFSACalendar" description="" type="Component" noSerialization="yes" group="FSA Reports">
            <if>macro("isReportingSystemDisabled", "FSA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <attribute name="componentClass">"axiomsl.gui.dashboard.UpdateCalendarButton"</attribute>
            <attribute name="reportingSystem">"FSA"</attribute>
        </parameter>
        <parameter name="fsaReports" description="FSA Reports" type="tree" group="FSA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FSA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FSA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FSA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false" >
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false" >
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false" >
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FSAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FSAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>
                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue.toString());
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FSAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FSAFirm name");
                        macro("checkGlobalObjectExists", "FSAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FSAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3, %4)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity"), deletingRow.param("consolidationLevel"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>
                    <macro name="entityParameter" arguments="FSAFirm">
                        "FSAFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="consolidationLevel" description="Consolidation Level" type="String">
                        choices(function("axiomsl.gabriel.fca.domain.ReportingBasis", "getAllReportingBases"));
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>
                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="dataItemName" description="Data Item Name" type="String"/>
                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                    <parameter name="fsaCompletionStatus" description="FSA Completion Status" type="String" defaultValue="NO DATA">
                        choices(function("axiomsl.gabriel.fca.domain.DataItemCompletionStatus", "getAllCompletionStatus"));
                    </parameter>
                    <parameter name="fsaScheduleStatus" description="FSA Schedule Status" type="String" defaultValue="NOT YET DUE">
                        choices(function("axiomsl.gabriel.fca.domain.DataItemScheduleStatus", "getAllScheduleStatusValues"));
                    </parameter>
                    <parameter name="crossValidationReports" description="Cross Validation Reports" type="String"/>
                    <parameter name="monetaryUnits" description="Monetary Units" type="String"/>
                    <parameter name="reportingCurrency" description="Reporting Currency" type="String"/>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="boeReports" description="BoE Reports" type="tree" group="BoE Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "BOE")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="BoE Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="BoE Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("BOEFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="BOEFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>
                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("BOEFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "BOEFirm name");
                        macro("checkGlobalObjectExists", "BOEFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "BOEFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>
                    <macro name="entityParameter" arguments="BOEFirm">
                        "BOEFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>

            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="updateBOEOSCACalendar" description="" type="Component" noSerialization="yes" group="BoE OSCA Reports">
            <if>macro("isReportingSystemDisabled", "BOE_OSCA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <attribute name="componentClass">"axiomsl.gui.dashboard.UpdateCalendarButton"</attribute>
            <attribute name="reportingSystem">"BOE_OSCA"</attribute>
        </parameter>

        <parameter name="boe_oscaReports" description="BoE OSCA Reports" type="tree" group="BoE OSCA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "BOE_OSCA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="BoE OSCA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="BoE OSCA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false" alphaNumericName="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("BOE_OSCAFirm", null);
			    </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="BOE_OSCAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>
                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("BOE_OSCAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "BOE_OSCAFirm name");
                        macro("checkGlobalObjectExists", "BOE_OSCAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "BOE_OSCAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>
                    <macro name="entityParameter" arguments="BOE_OSCAFirm">
                        "BOE_OSCAFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodEndDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>

            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>


        <parameter name="ffiecReports" description="FFIEC Reports" type="tree" group="FFIEC Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FFIEC")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FFIEC Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FFIEC Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FFIECFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FFIECFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FFIECFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FFIECFirm name");
                        macro("checkGlobalObjectExists", "FFIECFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FFIECFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="FFIECFirm">
                        "FFIECFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="masReports" description="MAS Reports" type="tree" group="MAS Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "MAS")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="MAS Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="MAS Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("MASFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="MASFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("MASFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "MASFirm name");
                        macro("checkGlobalObjectExists", "MASFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "MASFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="MASFirm">
                        "MASFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="rbiReports" description="RBI Reports" type="tree" group="RBI Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "RBI")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="RBI Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="RBI Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("RBIFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="RBIFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("RBIFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "RBIFirm name");
                        macro("checkGlobalObjectExists", "RBIFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "RBIFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="RBIFirm">
                        "RBIFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="hkmaReports" description="HKMA Reports" type="tree" group="HKMA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "HKMA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="HKMA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="HKMA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("HKMAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="HKMAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("HKMAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "HKMAFirm name");
                        macro("checkGlobalObjectExists", "HKMAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "HKMAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="HKMAFirm">
                        "HKMAFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="bokReports" description="BOK Reports" type="tree" group="BOK Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "BOK")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="BOK Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="BOK Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("BOKFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="BOKFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("BOKFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "BOKFirm name");
                        macro("checkGlobalObjectExists", "BOKFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "BOKFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="BOKFirm">
                        "BOKFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="fssReports" description="FSS Reports" type="tree" group="FSS Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FSS")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FSS Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FSS Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FSSFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FSSFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FSSFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FSSFirm name");
                        macro("checkGlobalObjectExists", "FSSFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FSSFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="FSSFirm">
                        "FSSFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="kfbReports" description="KFB Reports" type="tree" group="KFB Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "KFB")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="KFB Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="KFB Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("KFBFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="KFBFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("KFBFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "KFBFirm name");
                        macro("checkGlobalObjectExists", "KFBFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "KFBFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="KFBFirm">
                        "KFBFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="internalReports" description="Internal Reports" type="tree" group="Internal Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "Internal")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="Internal Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="Internal Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("InternalFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="InternalFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("InternalFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "InternalFirm name");
                        macro("checkGlobalObjectExists", "InternalFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "InternalFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="InternalFirm">
                        "InternalFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="apraReports" description="APRA Reports" type="tree" group="APRA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "APRA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="APRA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="APRA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("APRAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="APRAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("APRAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "APRAFirm name");
                        macro("checkGlobalObjectExists", "APRAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "APRAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="APRAFirm">
                        "APRAFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="bnmReports" description="BNM Reports" type="tree" group="BNM Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "BNM")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="BNM Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="BNM Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("BNMFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="BNMFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("BNMFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "BNMFirm name");
                        macro("checkGlobalObjectExists", "BNMFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "BNMFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="BNMFirm">
                        "BNMFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="hksfcReports" description="HKSFC Reports" type="tree" group="HKSFC Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "HKSFC")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="HKSFC Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="HKSFC Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("HKSFCFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="HKSFCFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("HKSFCFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "HKSFCFirm name");
                        macro("checkGlobalObjectExists", "HKSFCFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "HKSFCFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="HKSFCFirm">
                        "HKSFCFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="pbocReports" description="PBOC Reports" type="tree" group="PBOC Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "PBOC")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="PBOC Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="PBOC Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("PBOCFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="PBOCFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("PBOCFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "PBOCFirm name");
                        macro("checkGlobalObjectExists", "PBOCFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "PBOCFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="PBOCFirm">
                        "PBOCFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="safeReports" description="SAFE Reports" type="tree" group="SAFE Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "SAFE")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="SAFE Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="SAFE Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("SAFEFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="SAFEFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("SAFEFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "SAFEFirm name");
                        macro("checkGlobalObjectExists", "SAFEFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "SAFEFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="SAFEFirm">
                        "SAFEFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="cbrcReports" description="CBRC Reports" type="tree" group="CBRC Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "CBRC")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="CBRC Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="CBRC Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("CBRCFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="CBRCFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("CBRCFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "CBRCFirm name");
                        macro("checkGlobalObjectExists", "CBRCFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "CBRCFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="CBRCFirm">
                        "CBRCFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="satReports" description="SAT Reports" type="tree" group="SAT Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "SAT")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="SAT Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="SAT Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("SATFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="SATFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("SATFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "SATFirm name");
                        macro("checkGlobalObjectExists", "SATFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "SATFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="SATFirm">
                        "SATFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="sebiReports" description="SEBI Reports" type="tree" group="SEBI Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "SEBI")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="SEBI Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="SEBI Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("SEBIFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="SEBIFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("SEBIFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "SEBIFirm name");
                        macro("checkGlobalObjectExists", "SEBIFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "SEBIFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="SEBIFirm">
                        "SEBIFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="genericReports" description="Reports" type="tree" group="Generic Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "Generic")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>
            <nodeType name="rootReportNode" description="Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("GenericFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="GenericFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("GenericFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "GenericFirm name");
                        macro("checkGlobalObjectExists", "GenericFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "GenericFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="GenericFirm">
                        "GenericFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>

                    <parameter name="handBookReference" description="Handbook Reference" type="String"/>

                    <parameter name="reportingCurrency" description="Reporting Currency" type="String" defaultValue="">
                        <verifyForSave>
                            <if> currentParameter.getParameterValue() == ""
                                <then>
                                    errorMessage(l("Reporting Currency cannot be empty in %1", currentNode));
                                    false;
                                </then>
                            </if>
                        </verifyForSave>
                    </parameter>

                    <parameter name="isXBRLSubmission" description="Is XBRL Submission" type="boolean" defaultValue="true"/>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
            <renameGroup>
                if(getSystemDefault("genericReportingSystemName")==null,"Generic Reports",if(getSystemDefault("genericReportingSystemName").trim().equals(""),"Generic Reports",(getSystemDefault("genericReportingSystemName")+" Reports").trim()));
            </renameGroup>
        </parameter>

        <parameter name="generic2Reports" description="Reports" type="tree" group="Generic2 Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "Generic2")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>
            <nodeType name="rootReportNode" description="Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="Generic2Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("Generic2Firm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="Generic2Firm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("Generic2Firm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "Generic2Firm name");
                        macro("checkGlobalObjectExists", "Generic2Firm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "Generic2Firm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="Generic2Firm">
                        "Generic2Firm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>

                    <parameter name="handBookReference" description="Handbook Reference" type="String"/>

                    <parameter name="reportingCurrency" description="Reporting Currency" type="String" defaultValue="">
                        <verifyForSave>
                            <if> currentParameter.getParameterValue() == ""
                                <then>
                                    errorMessage(l("Reporting Currency cannot be empty in %1", currentNode));
                                    false;
                                </then>
                            </if>
                        </verifyForSave>
                    </parameter>

                    <parameter name="isXBRLSubmission" description="Is XBRL Submission" type="boolean" defaultValue="true"/>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
            <renameGroup>
                if(getSystemDefault("genericReportingSystemName2")==null,"Generic2 Reports",if(getSystemDefault("genericReportingSystemName2").trim().equals(""),"Generic Reports",(getSystemDefault("genericReportingSystemName2")+" Reports").trim()));
            </renameGroup>
        </parameter>

        <parameter name="generic3Reports" description="Reports" type="tree" group="Generic3 Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "Generic3")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>
            <nodeType name="rootReportNode" description="Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="Generic3Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("Generic3Firm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="Generic3Firm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("Generic3Firm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "Generic3Firm name");
                        macro("checkGlobalObjectExists", "Generic3Firm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "Generic3Firm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="Generic3Firm">
                        "Generic3Firm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>

                    <parameter name="handBookReference" description="Handbook Reference" type="String"/>

                    <parameter name="reportingCurrency" description="Reporting Currency" type="String" defaultValue="">
                        <verifyForSave>
                            <if> currentParameter.getParameterValue() == ""
                                <then>
                                    errorMessage(l("Reporting Currency cannot be empty in %1", currentNode));
                                    false;
                                </then>
                            </if>
                        </verifyForSave>
                    </parameter>

                    <parameter name="isXBRLSubmission" description="Is XBRL Submission" type="boolean" defaultValue="true"/>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
            <renameGroup>
                if(getSystemDefault("genericReportingSystemName3")==null,"Generic3 Reports",if(getSystemDefault("genericReportingSystemName3").trim().equals(""),"Generic3 Reports",(getSystemDefault("genericReportingSystemName3")+" Reports").trim()));
            </renameGroup>
        </parameter>


        <parameter name="pfrdReports" description="PFRD Reports" type="tree" group="PFRD Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "PFRD")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="PFRD Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="PFRD Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("PFRDFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="PFRDFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("PFRDFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "PFRDFirm name");
                        macro("checkGlobalObjectExists", "PFRDFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "PFRDFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="PFRDFirm">
                        "PFRDFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="secReports" description="SEC Reports" type="tree" group="SEC Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "SEC")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="SEC Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="SEC Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("SECFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="SECFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("SECFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "SECFirm name");
                        macro("checkGlobalObjectExists", "SECFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "SECFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="SECFirm">
                        "SECFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="frbReports" description="FRB Reports" type="tree" group="FRB Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FRB")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FRB Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FRB Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FRBFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FRBFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FRBFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FRBFirm name");
                        macro("checkGlobalObjectExists", "FRBFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FRBFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="FRBFirm">
                        "FRBFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="finraReports" description="FINRA Reports" type="tree" group="FINRA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FINRA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FINRA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FINRA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FINRAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FINRAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FINRAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FINRAFirm name");
                        macro("checkGlobalObjectExists", "FINRAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FINRAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="FINRAFirm">
                        "FINRAFirm"
                    </macro>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="updateFCACalendar" description="" type="Component" noSerialization="yes" group="FCA Reports">
            <if>macro("isReportingSystemDisabled", "FCA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <attribute name="componentClass">"axiomsl.gui.dashboard.UpdateCalendarButton"</attribute>
            <attribute name="reportingSystem">"FCA"</attribute>
        </parameter>
        <parameter name="fcaReports" description="FCA Reports" type="tree" group="FCA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FCA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>
            <attribute name="componentClass">"axiomsl.gui.dashboard.UpdateCalendarButton"</attribute>

            <nodeType name="rootReportNode" description="FCA Reports" renameAllowed="false" deleteAllowed="false" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FCA Report" renameAllowed="true" deleteAllowed="true"
                      hasChildren="true" autoSort="true" sortByComparable="true" reorderingAllowed="false"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate" pasteAsAllowed="false" alphaNumericName="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false" deleteAllowed="true" hasChildren="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false" deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FCAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FCAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue.toString());
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FCAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FCAFirm name");
                        macro("checkGlobalObjectExists", "FCAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FCAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3" keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2, %3, %4)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts",
                                deletingRow.param("entity"), deletingRow.param("consolidationLevel"), deletingRow.param("materialCurrency"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true" defaultValue="false"/>

                    <macro name="entityParameter" arguments="FCAFirm">
                        "FCAFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="consolidationLevel" description="Consolidation Level" type="String">
                        choices(function("axiomsl.gabriel.fca.domain.ReportingBasis", "getAllReportingBases"));
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="materialCurrency" description="Material Currency" type="String" defaultValue="consolidated">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </parameter>

                    <parameter name="dataItemName" description="Data Item Name" type="String"/>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer" defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>

                    <parameter name="completionStatus" description="Completion Status" type="String" defaultValue="NO DATA">
                        choices(function("axiomsl.gabriel.fca.domain.DataItemCompletionStatus", "getAllCompletionStatus"));
                    </parameter>

                    <parameter name="scheduleStatus" description="Schedule Status" type="String" defaultValue="NOT YET DUE">
                        choices(function("axiomsl.gabriel.fca.domain.DataItemScheduleStatus", "getAllScheduleStatusValues"));
                    </parameter>

                    <parameter name="crossValidationReports" description="Cross Validation Reports" type="String"/>

                    <parameter name="monetaryUnits" description="Monetary Units" type="String"/>

                    <parameter name="reportingCurrency" description="Reporting Currency" type="String" defaultValue="">
                        <verifyForSave>
                            <if> currentParameter.getParameterValue() == ""
                                <then>
                                    errorMessage(l("Reporting Currency cannot be empty in %1", currentNode));
                                    false;
                                </then>
                            </if>
                        </verifyForSave>
                    </parameter>

                    <parameter name="handBookReference" description="Handbook Reference" type="String"/>

                    <parameter name="isXBRLSubmission" description="Is XBRL Submission" type="boolean" defaultValue="true"/>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="finmaReports" description="FINMA Reports" type="tree" group="FINMA Reports" rootNodeType="rootReportNode">
            <if>macro("isReportingSystemDisabled", "FINMA")
                <then>
                    <removed/>
                </then>
                <else>
                    <enabled/>
                </else>
            </if>

            <nodeType name="rootReportNode" description="FINMA Reports" renameAllowed="false" deleteAllowed="false"
                      hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:report"/>
            <nodeType name="EnterpriseReportCalendar:report" description="FINMA Report" renameAllowed="true"
                      deleteAllowed="true" hasChildren="true" autoSort="true" sortByComparable="true"
                      childrenAreFixed="false" childrenTypes="EnterpriseReportCalendar:reportDate"
                      pasteAsAllowed="false" reorderingAllowed="false">
                <parameter name="description" description="Description" type="string"/>
                <parameter name="comments" description="Comments" type="string"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDate" description="Report Date" renameAllowed="false"
                      deleteAllowed="true" hasChildren="true" childrenAreFixed="false"
                      childrenTypes="EnterpriseReportCalendar:reportDateFirmSpecific" alphaNumericName="false">
                <macro name="reportDateParameters"/>
            </nodeType>
            <nodeType name="EnterpriseReportCalendar:reportDateFirmSpecific" description="Firm" renameAllowed="false"
                      deleteAllowed="true" hasChildren="false"
                      childrenAreFixed="false">
                <nodeNameLookup>
                    editor.getRemoteProxy().lookupObjects("FINMAFirm", null);
                </nodeNameLookup>
                <parameter name="isReadOnly" description="Firm Is Read Only" type="boolean" hidden="true"
                           defaultValue="false"/>
                <parameter name="firmName" description="Firm" type="String" isDataSet="FINMAFirm">
                    <if>param("isReadOnly")
                        <then>
                            <readOnly/>
                        </then>
                        <else>
                            <enabled/>
                            <default>
                                currentNode.getName()
                            </default>
                        </else>
                    </if>

                    <onParameterChange>
                        <if>newValue != null and newValue.length() &gt; 0
                            <then>
                                currentNode.setName(newValue);
                            </then>
                        </if>
                    </onParameterChange>
                    <attribute name="lookupFromValues">"Firm Name"
                        <comma/>
                        editor.getRemoteProxy().lookupObjects("FINMAFirm");
                    </attribute>

                    <verifyForSave>
                        macro("checkNonEmpty", currentParameter.getParameterValue(), "FINMAFirm name");
                        macro("checkGlobalObjectExists", "FINMAFirm", currentParameter.getParameterValue(), false);
                    </verifyForSave>
                    <validation>
                        macro("checkGlobalObjectExists", "FINMAFirm", newValue, true);
                        macro("checkNodeIsUnique", newValue, true);
                    </validation>
                </parameter>
                <parameter name="dueDate" description="Due Date" type="Date"/>

                <parameter name="reportInstances" description="Submit what:" type="table" length="3"
                           keyParameter="entity" tableTransposed="true">
                    <onRowAdded>
                        addedRow.param("isReadOnly") = false;
                    </onRowAdded>

                    <onRowDeleted>
                        macro("updateReadOnly", currentNode);
                    </onRowDeleted>

                    <confirmDeleteRow>
                        <if>deletingRow.param("isReadOnly")
                            <then>
                                confirm(l("Are you sure you want to delete Calendar Report Instance (%1, %2)? This will delete corresponding Enterprise Report Instance with sign off history and all attempts", deletingRow.param("entity"), deletingRow.param("currentCopyNumber")))
                            </then>
                            <else>
                                true
                            </else>
                        </if>
                    </confirmDeleteRow>

                    <parameter name="isReadOnly" description="Report instance is read only" type="boolean" hidden="true"
                               defaultValue="false"/>

                    <macro name="entityParameter" arguments="FINMAFirm">
                        "FINMAFirm"
                    </macro>

                    <parameter name="firmDueDate" description="Due Date" type="Date">
                        <default>
                            currentNode.param("dueDate");
                        </default>
                    </parameter>
                    <parameter name="firmPeriodStartDate" description="Period Start Date" type="Date">
                        <default>
                            currentNode.parent().param("periodStartDate");
                        </default>
                    </parameter>

                    <parameter name="currentCopyNumber" description="Copy Number" type="integer"
                               defaultValue="1">
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                        <validation>
                            <if>newValue &lt; 0
                                <then>
                                    return l("Copy number cannot have negative value");
                                </then>
                            </if>
                        </validation>
                    </parameter>
                </parameter>
            </nodeType>
            <onNodeAdded>
                <macro name="onNodeAdded"/>
            </onNodeAdded>

            <confirmDeleteNode>
                macro("confirmDeleteNode");
            </confirmDeleteNode>

            <onNodeDeleted>
                macro("onNodeDeleted");
            </onNodeDeleted>
        </parameter>

        <parameter name="enabledReportingSystems" description="Enabled Reporting Systems" type="integer" hidden="true" defaultValue="-1"/>

    </parameters>

    <loadCode>
        param("loading") = true;
        param("movingNodes");

        var enabledReportingSystems = function("axiomsl.util.ReportingSystems", "getEnabledReportingSystems", editor.getAxiomObjectManager(), editor.getAxiomEnvironment());
        param("enabledReportingSystems") = enabledReportingSystems;

        <if> !function("axiomsl.util.ReportingSystems", "isAnyReportingSystemEnabled", enabledReportingSystems)
            <then>
                message("No reporting system selected. Reporting systems can be selected from System Defaults");
            </then>
        </if>

        var eriDbIds = editor.getAxiomObjectManager().listObjectsOfType("EnterpriseReportInstance", null, axiomEnvironment);
        var eris = new("java.util.HashSet");
        <for>var i = 0 <comma/> i &lt; eriDbIds.size() <comma/> i++
            <do>
                eris.add(eriDbIds.get(i).getDbId());
            </do>
        </for>

        var calendar = <originalAxiom/>;
        var reports = <originalAxiom/>.getTable("reports");

        var paramList = function("axiomsl.util.ReportingSystems", "getReportNameFullList");
        <for>var i = 0 <comma/> i &lt; paramList.size() <comma/> i++
            <do>
                param(paramList.get(i));
            </do>
        </for>
        macro("setGenerics","");
        macro("setGenerics","2");
        macro("setGenerics","3");
        <for>var i = 0
            <comma/>
            i &lt; reports.size()
            <comma/>
            i++
            <do>
                var node = reports.get(i);
                var reportingSystem = node.getProperty("reportingSystem");
                var newLine = param(reportingSystem.toLowerCase() + "Reports").createChild("EnterpriseReportCalendar:report", node.getProperty("name"));
                macro("setGenericDescription",newLine,reportingSystem);
                newLine.setID(node.getProperty("id"));
                newLine.param("description") = node.getProperty("description");
                newLine.param("comments") = node.getProperty("comments");

                var reportDates = node.getTable("reportDates");
                var dates = list();
                <for>var j = 0 <comma/> j &lt; reportDates.size() <comma/> j++
                    <do>
                        var reportDate = reportDates.get(j);

                        var periodEndDate = reportDate.getProperty("periodEndDate");
                        var dateIndex = function("java.util.Collections", "binarySearch", dates, periodEndDate);
                        var reportDateChild = newLine.createChild("EnterpriseReportCalendar:reportDate", function("axiomsl.util.basic.ObjectFormatter", "toGUIString", "dd-MMM-yyyy", periodEndDate));
                        reportDateChild.setComparable(periodEndDate);
                        reportDateChild.param("periodStartDate") = reportDate.getProperty("periodStartDate");
                        reportDateChild.param("periodEndDate") = periodEndDate;
                        reportDateChild.param("isReadOnly") = false;
                        reportDateChild.setID(reportDate.getProperty("id"));

                        var firms = reportDate.getTable("firms");
                        <for>var k = 0 <comma/> k &lt; firms.size() <comma/> k++
                            <do>
                                var firm = firms.get(k);
                                var firmChild = reportDateChild.createChild("EnterpriseReportCalendar:reportDateFirmSpecific", firm.getProperty("firm").getTargetObjectName());
                                firmChild.param("firmName") = firm.getProperty("firm").getTargetObjectName();
                                firmChild.param("isReadOnly") = false;
                                firmChild.param("dueDate") = firm.getProperty("dueDate");
                                firmChild.setID(firm.getProperty("id"));

                                var reportInstances = firm.getTable("reportInstances");
                                var reportInstanceList = list();
                                <for>var l = 0 <comma/> l &lt; reportInstances.size() <comma/> l++
                                    <do>
                                        var reportInstance = reportInstances.get(l);
                                        var row = tableRow();
                                        reportInstanceList.add(row);

                                        var id = reportInstance.getProperty("id");
                                        <if>eris.contains(id)
                                            <then>
                                                row.param("isReadOnly") = true;
                                                reportDateChild.param("isReadOnly") = true;
                                                firmChild.param("isReadOnly") = true;
                                            </then>
                                            <else>
                                                row.param("isReadOnly") = false;
                                            </else>
                                        </if>

                                        row.setID(id);
                                        macro("safeRowParamInit", row, "entity", reportInstance, "entity", "");
                                        macro("safeRowParamInit", row, "firmPeriodStartDate", reportInstance, "periodStartDate", reportDateChild.param("periodStartDate"));
                                        macro("safeRowParamInit", row, "firmDueDate", reportInstance, "dueDate", firmChild.param("dueDate"));

                                        var specificParameters = reportInstance.getProperty("firmSpecificParameters");
                                        macro("safeRowParamInit", row, "entity", specificParameters, "entity", "");
                                        macro("safeRowParamInit", row, "currentCopyNumber", specificParameters, "currentCopyNumber", 1);

                                        <case>
                                            reportingSystem == "FSA" or reportingSystem == "FCA"
                                            <then>
                                                macro("safeRowParamInit", row, "consolidationLevel", specificParameters, "consolidationLevel", "unconsolidated");
                                                macro("safeRowParamInit", row, "materialCurrency", specificParameters, "materialCurrency", "");
                                                macro("safeRowParamInit", row, "dataItemName", specificParameters, "dataItemName", "");
                                                macro("safeRowParamInit", row, "crossValidationReports", specificParameters, "crossValidationReports", "");
                                                macro("safeRowParamInit", row, "monetaryUnits", specificParameters, "monetaryUnits", "");
                                                macro("safeRowParamInit", row, "reportingCurrency", specificParameters, "reportingCurrency", "");
                                                <case>reportingSystem == "FSA"
                                                    <then>
                                                        row.param("fsaCompletionStatus") = specificParameters.getProperty("fsaCompletionStatus");
                                                        row.param("fsaScheduleStatus") = specificParameters.getProperty("fsaScheduleStatus");
                                                    </then>
                                                    reportingSystem == "FCA"
                                                    <then>
                                                        row.param("completionStatus") = specificParameters.getProperty("completionStatus");
                                                        row.param("scheduleStatus") = specificParameters.getProperty("scheduleStatus");
                                                    </then>
                                                </case>
                                            </then>
                                            reportingSystem == "MAS" or reportingSystem == "RBI" or reportingSystem == "HKMA" or reportingSystem == "BOK"
                                            or reportingSystem == "FSS" or reportingSystem == "KFB" or reportingSystem == "APRA" or reportingSystem == "BNM"
                                            or reportingSystem == "HKSFC" or reportingSystem == "PBOC" or reportingSystem == "SAFE" or reportingSystem == "CBRC"
                                            or reportingSystem == "SAT" or reportingSystem == "SEBI" or reportingSystem == "SEC" or reportingSystem == "FRB" or reportingSystem == "FINRA"
                                            or reportingSystem == "Generic" or reportingSystem == "Generic2" or reportingSystem == "Generic3"
                                            <then>
                                                row.param("materialCurrency") = specificParameters.getProperty("materialCurrency");
                                                <if> reportingSystem == "Generic"  or reportingSystem == "Generic2" or reportingSystem == "Generic3"
                                                    <then>
                                                        macro("safeRowParamInit", row, "reportingCurrency", specificParameters, "reportingCurrency", "");
                                                    </then>
                                                </if>
                                            </then>
                                        </case>

                                        <if>reportingSystem == "FCA" or reportingSystem == "Generic"  or reportingSystem == "Generic2" or reportingSystem == "Generic3"
                                            <then>
                                                macro("safeRowParamInit", row, "handBookReference", specificParameters, "handBookReference", "");
                                                macro("safeRowParamInit", row, "isXBRLSubmission", specificParameters, "isXBRLSubmission", true);
                                            </then>
                                        </if>
                                    </do>
                                </for>
                                firmChild.param("reportInstances") = reportInstanceList;
                                firmChild.addToParent();
                            </do>
                        </for>
                        <if> dateIndex &gt;= 0
                            <then>
                                reportDateChild.addToParent(dateIndex);
                                dates.add(dateIndex, periodEndDate);
                            </then>
                            <else>
                                reportDateChild.addToParent(-dateIndex-1);
                                dates.add(-dateIndex-1, periodEndDate);
                            </else>
                        </if>
                    </do>
                </for>
                newLine.addToParent();
            </do>
        </for>

        param("loading") = false;
    </loadCode>

    <saveCode>
        var calendar =<axiomForSave/>;
        var reportTypes = function("axiomsl.util.ReportingSystems", "getEnabledReportingSystemNameList", param("enabledReportingSystems"));

        <for>var t = 0 <comma/> t &lt; reportTypes.size() <comma/> t++
            <do>
                var firmType = reportTypes.get(t) + "Firm";
                var reportType = reportTypes.get(t);
                var reportingSystem = reportTypes.get(t).toUpperCase();
                var reports = param(reportTypes.get(t).toLowerCase() + "Reports");
                <for>var i = 0
                    <comma/>
                    i &lt; reports.childCount()
                    <comma/>
                    i++
                    <do>
                        var node = reports.child(i);
                        var report = calendar.getTable("reports").addRow("EnterpriseReportCalendar:report");
                        report.setProperty("name", node.getName());
                        report.setProperty("description", node.param("description"));
                        report.setProperty("id", node.getID());
                        report.setProperty("comments", node.param("comments"));
                        report.setProperty("reportingSystem", reportType);

                        <for>var j = 0 <comma/> j &lt; node.childCount() <comma/> j++
                            <do>
                                var reportDateNode = node.child(j);
                                var reportDate = calendar.createObjectPropertyValue("EnterpriseReportCalendar:reportDate");
                                reportDate.setProperty("periodEndDate", reportDateNode.param("periodEndDate"));
                                reportDate.setProperty("periodStartDate", reportDateNode.param("periodStartDate"));
                                reportDate.setProperty("id", reportDateNode.getID());
                                reportDate.setProperty("name", reportDateNode.getID());
                                report.getTable("reportDates").addRowToSortedTable(reportDate);
                                <for>var k = 0
                                    <comma/>
                                    k &lt; reportDateNode.childCount()
                                    <comma/>
                                    k++
                                    <do>
                                        var firmNode = reportDateNode.child(k);
                                        var firm = reportDate.getTable("firms").addRow("EnterpriseReportCalendar:reportDateFirmSpecific");

                                        var firmID = function("axiomsl.server.object_framework.ObjectID", "createNameId", firmType, null, firmNode.param("firmName"));
                                        var firmObject = editor.getRemoteProxy().getAxiomObjectManager().locate(firmID);
                                        firm.setProperty("firm", firm.createReferencePropertyValue(function("axiomsl.server.object_framework.RouteToObject", "createEmptyRoute"), firmObject));
                                        firm.setProperty("dueDate", firmNode.param("dueDate"));
                                        firm.setProperty("id", firmNode.getID());
                                        firm.setProperty("name", firmNode.getID());

                                        <for>var l = 0
                                            <comma/>
                                            l &lt; firmNode.param("reportInstances").size();
                                            <comma/>
                                            l++
                                            <do>
                                                var row = firmNode.param("reportInstances").get(l);
                                                var reportInstance = firm.getTable("reportInstances").addRow("EnterpriseReportCalendar:reportInstance");
                                                reportInstance.setProperty("id", row.getID());
                                                reportInstance.setProperty("name", row.getID());

                                                <if>!reportDateNode.param("periodStartDate").equals(row.param("firmPeriodStartDate"));
                                                    <then>
                                                        reportInstance.setProperty("periodStartDate", row.param("firmPeriodStartDate"));
                                                    </then>
                                                </if>

                                                <if>!firmNode.param("dueDate").equals(row.param("firmDueDate"));
                                                    <then>
                                                        reportInstance.setProperty("dueDate", row.param("firmDueDate"));
                                                    </then>
                                                </if>

                                                var specificParameters = reportInstance.createObjectPropertyValue("EnterpriseReportCalendar:reportInstanceParameters_" + reportType);
                                                specificParameters.setProperty("entity", row.param("entity"));

                                                <if>row.getParam("currentCopyNumber") != null
                                                    <then>
                                                        specificParameters.setProperty("currentCopyNumber", row.param("currentCopyNumber"));
                                                    </then>
                                                </if>
                                                <case>
                                                    reportType == "FSA" or reportType == "FCA"
                                                    <then>
                                                        specificParameters.setProperty("consolidationLevel", row.param("consolidationLevel"));
                                                        specificParameters.setProperty("materialCurrency", row.param("materialCurrency"));
                                                        specificParameters.setProperty("dataItemName", row.param("dataItemName"));
                                                        specificParameters.setProperty("monetaryUnits", row.param("monetaryUnits"));
                                                        specificParameters.setProperty("reportingCurrency", row.param("reportingCurrency"));
                                                        specificParameters.setProperty("crossValidationReports", row.param("crossValidationReports"));
                                                        <case>reportType == "FSA"
                                                            <then>
                                                                specificParameters.setProperty("fsaCompletionStatus", row.param("fsaCompletionStatus"));
                                                                specificParameters.setProperty("fsaScheduleStatus", row.param("fsaScheduleStatus"));
                                                            </then>
                                                            reportType == "FCA"
                                                            <then>
                                                                specificParameters.setProperty("completionStatus", row.param("completionStatus"));
                                                                specificParameters.setProperty("scheduleStatus", row.param("scheduleStatus"));
                                                            </then>
                                                        </case>
                                                    </then>
                                                    reportType == "MAS" or reportType == "RBI" or reportType == "HKMA" or reportType == "BOK"
                                                    or reportType == "FSS" or reportType == "KFB" or reportType == "APRA" or reportType == "BNM"
                                                    or reportType == "HKSFC" or reportType == "PBOC" or reportType == "SAFE" or reportType == "CBRC"
                                                    or reportType == "SAT" or reportType == "SEBI" or reportType == "SEC" or reportType == "FRB" or reportType == "FINRA"
                                                    or reportType == "Generic"  or reportingSystem == "Generic2" or reportingSystem == "Generic3"
                                                    <then>
                                                        <if>row.getParam("materialCurrency") != null
                                                            <then>
                                                                specificParameters.setProperty("materialCurrency", row.param("materialCurrency"));
                                                            </then>
                                                        </if>
                                                    </then>
                                                </case>

                                                <if>reportType == "FCA" or reportType == "Generic" or reportType == "Generic2" or reportType == "Generic3"
                                                    <then>
                                                        specificParameters.setProperty("reportingCurrency", row.param("reportingCurrency"));
                                                        specificParameters.setProperty("handBookReference", row.param("handBookReference"));
                                                        specificParameters.setProperty("isXBRLSubmission", row.param("isXBRLSubmission"));
                                                    </then>
                                                </if>

                                                reportInstance.setProperty("firmSpecificParameters", specificParameters);
                                            </do>
                                        </for>
                                    </do>
                                </for>
                            </do>
                        </for>
                    </do>
                </for>
            </do>
        </for>
    </saveCode>

    <macros>
        <macro name="reportDateParameters">

            <parameter name="isReadOnly" description="Period End Date Is Read Only" type="boolean" hidden="true" defaultValue="false"/>
            <parameter name="periodEndDate" description="Period End Date" type="Date">
                <if>param("isReadOnly")
                    <then>
                        <readOnly/>
                    </then>
                    <else>
                        <enabled/>
                    </else>
                </if>
                <onParameterChange>
                    currentNode.setComparable(newValue);
                    currentNode.setName(function("axiomsl.util.basic.ObjectFormatter", "toGUIString", "dd-MMM-yyyy", newValue));
                </onParameterChange>
                <verifyForSave>
                    macro("checkNodeIsUnique", currentNode.getName(), false);
                </verifyForSave>
            </parameter>

            <parameter name="periodStartDate" description="Period Start Date" type="Date"/>
        </macro>

        <macro name="firmNameParameter" arguments="firmType">

        </macro>

        <macro name="entityParameter" arguments="firmType">
            <parameter name="entity" lookupInPlace="yes" description="Entity" type="String">
                <if>param("firmName").length() == 0
                    <then>
                        <disabled/>
                    </then>
                    <else>
                        <enabled/>
                        <if>param("isReadOnly")
                            <then>
                                <readOnly/>
                            </then>
                            <else>
                                <enabled/>
                            </else>
                        </if>
                    </else>
                </if>
                <attribute name="lookupFromValues">"Entity"
                    <comma/>
                    <if>param("firmName").length() > 0
                        <then>
                            var firm = editor.getAxiomObjectManager().locate(function("axiomsl.server.object_framework.ObjectID", "createNameId", "<firmType/>", null,
                            param("firmName")));
                            var entities = list();
                            var firmEntities = firm.getTable("entities");
                            <for>var j = 0 <comma/> j &lt; firmEntities.size() <comma/> j++
                                <do>
                                    entities.add(firmEntities.get(j).getProperty("entity"));
                                </do>
                            </for>
                            entities;
                        </then>
                        <else>
                            list();
                        </else>
                    </if>
                </attribute>
                <verifyForSave>
                    macro("verifyNonEmpty");
                </verifyForSave>
            </parameter>
        </macro>

        <macro name="onNodeDeleted">
            <if>deletedNode.type() == "EnterpriseReportCalendar:reportDateFirmSpecific"
                <then>
                    macro("updateReadOnly", deletedNode);
                </then>
            </if>

            var row = tableRow();
            row.param("movingNodeID") = deletedNode.getID();
            row.param("movingNodeName") = deletedNode.getName();
            row.param("movingNodeParentID") = deletedNode.parent().getID();
            param("movingNodes").add(row);
        </macro>

        <macro name="onNodeAdded">
            <if>addedNode.parent().level() == 1 <!-- period end date node -->
                <then>
                    addedNode.setComparable(addedNode.param("periodEndDate"));
                    addedNode.setName(function("axiomsl.util.basic.ObjectFormatter", "toGUIString", "dd-MMM-yyyy", addedNode.param("periodEndDate")));
                </then>
            </if>

            var isMovingNodeToSameParent = false;
            <for>var j = 0 <comma/> j &lt; param("movingNodes").size() <comma/> j++
                <do>
                    var movingNodeParentID = param("movingNodes").get(j).param("movingNodeParentID");
                    <if> param("movingNodes").get(j).param("movingNodeID") == addedNode.getID()
                        and param("movingNodes").get(j).param("movingNodeName") == addedNode.getName()
                        and (movingNodeParentID == addedNode.parent().getID() or (addedNode.parent().getID() == null and movingNodeParentID == ""))
                        <then>
                            isMovingNodeToSameParent = true;
                            param("movingNodes").remove(j);
                            break;
                        </then>
                    </if>
                </do>
            </for>

            <if> !param("loading") and !isMovingNodeToSameParent
                <then>
                    var firmNodes = addedNode.getAllLeaves();
                    <for>var j = 0 <comma/> j &lt; firmNodes.size() <comma/> j++
                        <do>
                            <if>firmNodes.get(j).type() == "EnterpriseReportCalendar:reportDateFirmSpecific"
                                <then>
                                    var reportInstances = firmNodes.get(j).param("reportInstances");
                                    <for>var i = 0 <comma/> i &lt; reportInstances.size() <comma/> i++
                                        <do>
                                            reportInstances.get(i).setID(function("axiomsl.util.UUID", "randomUUID").toString());
                                        </do>
                                    </for>
                                </then>
                            </if>
                        </do>
                    </for>
                    macro("updateReadOnly", addedNode);
                </then>
            </if>

        </macro>

        <macro name="confirmDeleteNode">
            <if>(deletingNode.type() == "EnterpriseReportCalendar:reportDate" or deletingNode.type() == "EnterpriseReportCalendar:reportDateFirmSpecific") and
                deletingNode.param("isReadOnly")
                <then>
                    confirm(l("Are you sure you want to delete node %1? This will delete all corresponding Enterprise Report Instances with sign off history and all attempts",
                    deletingNode.name()))
                </then>
                <else>
                    <if>deletingNode.type() == "EnterpriseReportCalendar:report"
                        <then>
                            var isReadOnly = false;
                            <for>var j = 0 <comma/> j &lt; deletingNode.childCount() <comma/> j++
                                <do>
                                    <if>deletingNode.child(j).param("isReadOnly")
                                        <then>
                                            isReadOnly = true;
                                        </then>
                                    </if>
                                </do>
                            </for>
                            <if>isReadOnly
                                <then>
                                    confirm(l("Are you sure you want to delete node %1? This will delete all corresponding Enterprise Report Instances with sign off history and all attempts", deletingNode.name()))
                                </then>
                                <else>
                                    true
                                </else>
                            </if>
                        </then>
                        <else>
                            true
                        </else>
                    </if>
                </else>
            </if>
        </macro>

        <macro name="markBlue" arguments="parameter">
            var text = <parameter/>;
            <parameter/> = <string>&lt;html&gt;&lt;body&gt;&lt;font color='BLUE'&gt;</string> + text + <string>&lt;/font&gt;&lt;/body&gt;&lt;/html&gt;</string>;
        </macro>

        <macro name="updateReadOnly" arguments="currentNode">
            var dateNodes = macro("getDateNodes",<currentNode/>);
            <for>var k = 0 <comma/> k &lt; dateNodes.size() <comma/> k++
                <do>
                    var dateNode = dateNodes.get(k);
                    dateNode.param("isReadOnly") = false;
                    <for>var j = 0 <comma/> j &lt; dateNode.childCount() <comma/> j++
                        <do>
                            var firmNode = dateNode.child(j);
                            firmNode.param("isReadOnly") = false;
                            <for>var i = 0 <comma/> i &lt; firmNode.param("reportInstances").size() <comma/> i++
                                <do>
                                    var reportInstanceRow = firmNode.param("reportInstances").get(i);
                                    var id = reportInstanceRow.getID();
                                    var reportInstanceID = function("axiomsl.server.object_framework.ObjectID", "createId", "EnterpriseReportInstance", null,
                                    id);

                                    <if>editor.getAxiomObjectManager().objectExists(reportInstanceID, editor.getAxiomEnvironment()) and
                                        !editor.getAxiomObjectManager().locate(reportInstanceID).getTable("signOffs").isEmpty()
                                        <then>
                                            reportInstanceRow.param("isReadOnly") = true;
                                            firmNode.param("isReadOnly") = true;
                                            dateNode.param("isReadOnly") = true;
                                        </then>
                                        <else>
                                            reportInstanceRow.param("isReadOnly") = false;
                                        </else>
                                    </if>
                                </do>
                            </for>
                        </do>
                    </for>
                </do>
            </for>
        </macro>

        <macro name="getDateNodes" arguments="currentNode">
            var parentNode = <currentNode/>;
            <for><comma/> parentNode != null and parentNode.type() != "EnterpriseReportCalendar:reportDate"<comma/>
                <do>
                    parentNode = parentNode.parent()
                </do>
            </for>
            <if>parentNode == null
                <then>
                    var childNodes = new("java.util.Vector");
                    var node = <currentNode/>;
                    childNodes.add(node);
                    <for><comma/> childNodes.size() &gt; 0 and childNodes.get(0).type() != "EnterpriseReportCalendar:reportDate"<comma/>
                        <do>
                            var newChildNodes = new("java.util.Vector");
                            <for>var k = 0<comma/> k &lt; childNodes.size()<comma/>k++
                                <do>
                                    newChildNodes.addAll(childNodes.get(k).children());
                                </do>
                            </for>
                            childNodes = newChildNodes;
                        </do>
                    </for>
                    ;childNodes
                </then>
                <else>
                    var nodes = new("java.util.Vector");
                    nodes.add(parentNode);
                    ;nodes
                </else>
            </if>
        </macro>
        <macro name="setGenerics" arguments="genericNumber">
            <if> (param("generic"+<genericNumber/>+"Reports")!=null)
               <then>
                    var genericName=new("axiomsl.server.object_framework.util.SystemDefaults", editor.getAxiomObjectManager(), editor.getAxiomEnvironment()).getString("genericReportingSystemName"+<genericNumber/>);
                    <if>genericName != null
                        <then>
                            <if>genericName.trim().equals("")
                                <then>
                                    genericName="Generic"+<genericNumber/>;
                                </then>
                            </if>
                            genericName+=" Reports";
                            param("generic"+<genericNumber/>+"Reports").getAllNodes().get(0).getAllNodes().get(0).setName(genericName);
                            param("generic"+<genericNumber/>+"Reports").getAllNodes().get(0).getAllNodes().get(0).setDescription(genericName);
                        </then>
                    </if>
               </then>
           </if>
        </macro>
        <macro name="setGenericDescription" arguments="newLine,reportingSystem">
            <if><reportingSystem/> == "Generic2"
                <then>
                    var genericName=new("axiomsl.server.object_framework.util.SystemDefaults", editor.getAxiomObjectManager(), editor.getAxiomEnvironment()).getString("genericReportingSystemName2");
                    <newLine/>.getNode().m_Type.m_sDescription=function("axiomsl.util.basic.L", "l", function("axiomsl.util.basic.GenericClassUtils", "normalizeLogFileName", genericName));
                </then>
            </if>
            <if><reportingSystem/> == "Generic3"
                <then>
                    var genericName=new("axiomsl.server.object_framework.util.SystemDefaults", editor.getAxiomObjectManager(), editor.getAxiomEnvironment()).getString("genericReportingSystemName3");
                    <newLine/>.getNode().m_Type.m_sDescription=function("axiomsl.util.basic.L", "l", function("axiomsl.util.basic.GenericClassUtils", "normalizeLogFileName", genericName));
                </then>
            </if>
        </macro>
    </macros>


</data_set_category>